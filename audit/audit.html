<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Audit Help</title>

  <link rel="stylesheet" href="../styles.css" />
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>

  <style>
    /* Minimal page-specific layout; relies on your styles.css */
    .page-wrap { max-width: 1100px; margin: 0 auto; padding: 24px; }
    .card { background: rgba(255,255,255,0.92); border-radius: 14px; padding: 18px; margin-bottom: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.08); }
    .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 12px; }
    .col-12 { grid-column: span 12; }
    .col-6 { grid-column: span 6; }
    .col-4 { grid-column: span 4; }
    .col-8 { grid-column: span 8; }
    @media (max-width: 900px) {
      .col-6,.col-4,.col-8 { grid-column: span 12; }
    }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px; border-bottom: 1px solid rgba(0,0,0,0.08); text-align: left; font-size: 14px; }
    .muted { opacity: 0.75; }
    .btn-row { display: flex; gap: 10px; flex-wrap: wrap; }
    .btn { cursor: pointer; border: none; border-radius: 10px; padding: 10px 14px; font-weight: 600; }
    .btn-primary { background: #111; color: #fff; }
    .btn-secondary { background: #eee; color: #111; }
    .pill { display:inline-block; padding:4px 10px; border-radius:999px; background:#eee; font-size:12px; }
    .danger { color: #b00020; font-weight: 700; }
    input, select, textarea { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.14); }
    textarea { min-height: 90px; }
    .small { font-size: 12px; }
  </style>
</head>

<body data-page="audit" data-requires-auth="true">
<a class="skip-link" href="#main">Skip to content</a>
<header class="site-header">
<div class="container header-inner">
<div class="header-left">
<button aria-controls="sideNav" aria-expanded="false" class="sidebar-toggle" type="button"><span class="sr-only">Open navigation</span><span aria-hidden="true" class="hamburger"></span></button>
<a href="../account/account.html" class="header-avatar" id="headerAvatar" title="My Account" aria-label="My Account" hidden>
<img id="headerAvatarImage" alt="Profile" style="display: none;" />
<span id="headerAvatarInitials" class="header-avatar-initials"></span>
</a>
</div>
<a aria-label="Listo Home" class="brand" href="../dashboard.html">
<img alt="Listo" class="brand-logo" src="../images/logo2.png"/>
</a>

<div class="header-actions">
<div aria-label="Language toggle" class="lang-switch" role="group">
<button aria-pressed="true" class="chip" data-lang="en" type="button">EN</button>
<button aria-pressed="false" class="chip" data-lang="es" type="button">ES</button>
</div>
<button class="btn small ghost" data-i18n="auth.logout" hidden="" id="logoutBtn" type="button">
          Log out
        </button>
</div>
</div>
</header><div class="layout"><aside aria-label="Primary" class="sidebar"><div class="nav-menu sidebar-nav" id="sideNav">
<a class="sidebar-link nav-link" data-i18n="nav.dashboard" href="../dashboard.html">Dashboard</a>
<a class="sidebar-link nav-link" data-i18n="nav.prequal" href="../prequal.html">Pre-Qualification</a>
<a class="sidebar-link nav-link" data-i18n="nav.payroll" href="../payroll/payroll.html">Payroll</a>
<a class="sidebar-link nav-link" data-i18n="nav.employees" href="../employees/employees.html">Employees</a>
<a class="sidebar-link nav-link" data-i18n="nav.audit" href="../audit/audit.html">Audit Help</a>
<a class="sidebar-link nav-link" data-i18n="nav.contractScanner" href="../contract-scanner/contract-scanner.html">Contract Scanner</a>
<a class="sidebar-link nav-link" data-i18n="nav.invoiceBuilder" href="../invoice/invoice.html">Invoice Builder</a>
<a class="sidebar-link nav-link" data-i18n="nav.support" href="../support.html">Support</a>
</div></aside><main id="main">
  <div class="page-wrap">
    <!-- Page Title -->
    <div class="card">
      <h1 style="margin-top:0;" data-i18n="audit.title">Audit Help</h1>
      <p class="muted" style="margin-bottom:0;" data-i18n="audit.description">
        Learn about insurance audits and prepare your audit package with our step-by-step tool.
      </p>
    </div>

    <!-- Part 1: Audit Explanation -->
    <div class="card" style="margin-bottom: 32px;">
      <h2 style="margin-top:0; margin-bottom: 16px;" data-i18n="audit.explanationTitle">Audit Explanation</h2>
      
      <div style="margin-bottom: 20px;">
        <h3 style="margin-top:0; margin-bottom: 12px;" data-i18n="audit.whyTitle">Why do insurance audits exist?</h3>
        <p data-i18n="audit.whyDesc">
          Insurance audits are a standard practice where your insurance carrier verifies the information you provided when you purchased your policy. 
          Since workers' compensation premiums are based on your actual payroll, the carrier needs to confirm the amounts you paid during the policy period 
          to calculate your final premium accurately.
        </p>
      </div>

      <div style="margin-bottom: 20px;">
        <h3 style="margin-top:0; margin-bottom: 12px;" data-i18n="audit.expectationsTitle">What to expect</h3>
        <p data-i18n="audit.expectationsDesc">
          Your insurance carrier is verifying <b>payroll paid during your previous policy period</b> so your premium can be calculated correctly.
        </p>
        <p data-i18n="audit.expectationsSubDesc">
          During the audit, you'll typically need to provide:
        </p>
        <ul>
          <li data-i18n="audit.expectations1">Payroll amounts actually paid (by employee and totals)</li>
          <li data-i18n="audit.expectations2">Payment methods (check, cash, electronic)</li>
          <li data-i18n="audit.expectations3">Independent contractor payments (1099s) if applicable</li>
          <li data-i18n="audit.expectations4">Supporting bank statements and tax forms</li>
        </ul>
      </div>

      <div>
        <h3 style="margin-top:0; margin-bottom: 12px;" data-i18n="audit.processTitle">The audit process</h3>
        <p data-i18n="audit.processDesc">
          Most audits are straightforward. The auditor will review your payroll records, payment documentation, and any supporting materials you provide. 
          They may ask clarifying questions about your business operations, payment methods, or subcontractor relationships. 
          Being prepared with organized documentation makes the process smooth and helps ensure accurate premium calculations.
        </p>
        <p class="muted" style="margin-bottom:0;" data-i18n="audit.processNote">
          The Audit Packet tool below helps you organize all necessary documents and information before your audit, 
          compiling everything into a printer-friendly PDF package that you can email directly to your auditor.
        </p>
      </div>
    </div>

    <!-- Part 2: Audit Packet -->
    <div class="card" style="border-top: 3px solid #111; padding-top: 24px;">
      <h2 style="margin-top:0; margin-bottom: 16px;" data-i18n="audit.packetTitle">Audit Packet</h2>
      <div class="pill" data-i18n="audit.subtitle">Printer-friendly package • PDF 8.5×11 • SendGrid email</div>
      <p class="muted" style="margin-bottom: 20px;" data-i18n="audit.packetDesc">
        Use this tool to prepare your audit package by collecting your payroll summary (for your prior policy period),
        supporting documents, and a short questionnaire.
      </p>

      <!-- Business Information (Combined: Audit Period + Business Info) -->
      <div class="card" style="margin-top: 20px;">
        <h2 style="margin-top:0;" data-i18n="audit.businessTitle">1) Business information</h2>
        <div class="grid">
          <div class="col-6">
            <label data-i18n="audit.businessName">Business Name</label>
            <input id="businessName" type="text" placeholder="ABC Construction LLC" />
          </div>
          <div class="col-6">
            <label data-i18n="audit.auditorEmail">Auditor Email</label>
            <input id="auditorEmail" type="email" placeholder="agent@agency.com" />
          </div>
          <div class="col-4">
            <label data-i18n="audit.policyStart">Policy Start Date</label>
            <input id="policyStart" type="date" />
          </div>
          <div class="col-4">
            <label data-i18n="audit.policyEnd">Policy End Date</label>
            <input id="policyEnd" type="date" />
          </div>
          <div class="col-4">
            <label data-i18n="audit.policyNumber">Policy Number</label>
            <input id="policyNumber" type="text" placeholder="POL-123456" />
          </div>
          <div class="col-6">
            <label data-i18n="audit.taxId">Tax ID (EIN or SSN)</label>
            <input id="taxId" type="text" placeholder="12-3456789" />
          </div>
          <div class="col-6">
            <label data-i18n="audit.phone">Phone</label>
            <input id="phone" type="text" placeholder="(555) 555-5555" />
          </div>
          <div class="col-6">
            <label class="muted" data-i18n="audit.quickActions">Quick actions</label>
            <div class="btn-row">
              <button id="btnClear" class="btn btn-secondary" type="button" data-i18n="audit.clear">Clear</button>
            </div>
          </div>
        </div>
        <div id="periodMsg" class="small muted" style="margin-top:10px;"></div>
      </div>

      <!-- Questionnaire -->
      <div class="card" style="margin-top: 20px;">
      <h2 style="margin-top:0;" data-i18n="audit.questionnaireTitle">2) Audit questionnaire</h2>
      <p class="muted" style="margin-bottom: 12px;" data-i18n="audit.questionnaireDesc">Answer these questions to help complete your audit package.</p>
      <div class="grid">
        <div class="col-6">
          <label data-i18n="audit.qCash">Were any payments made in cash?</label>
          <select id="qCash">
            <option value="">Select</option>
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>
        <div class="col-6">
          <label data-i18n="audit.qCashExplain">If yes, explain</label>
          <textarea id="qCashExplain" placeholder="Example: Occasional weekend labor, approx $300-$600/month"></textarea>
        </div>

        <div class="col-6">
          <label data-i18n="audit.qSubs">Did you pay any subcontractors (1099)?</label>
          <select id="qSubs">
            <option value="">Select</option>
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>
        <div class="col-6">
          <label data-i18n="audit.qCOI">Did you collect COIs from subcontractors?</label>
          <select id="qCOI">
            <option value="">Select</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
            <option value="some">Some</option>
          </select>
        </div>

        <div class="col-6">
          <label data-i18n="audit.qOwnerLabor">Did you perform any owner labor?</label>
          <select id="qOwnerLabor">
            <option value="">Select</option>
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>
        <div class="col-6">
          <label data-i18n="audit.qChanges">Any changes to your business during the period?</label>
          <textarea id="qChanges" placeholder="Example: Added painting services; hired 2 new workers"></textarea>
        </div>

        <div class="col-12">
          <label data-i18n="audit.qNotes">Additional notes for auditor (optional)</label>
          <textarea id="qNotes" placeholder="Anything you'd like to clarify for the audit"></textarea>
        </div>
      </div>

      <div class="btn-row" style="margin-top: 10px;">
        <button id="btnSaveQuestionnaire" class="btn btn-secondary" type="button" data-i18n="audit.saveQuestionnaire">Save questionnaire</button>
        <span id="qMsg" class="small muted"></span>
      </div>
      </div>

      <!-- Payroll Summary -->
      <div class="card" style="margin-top: 20px;">
      <div class="row-between" style="margin-bottom: 12px;">
        <div>
          <h2 style="margin-top:0;" data-i18n="audit.payrollTitle">3) Payroll summary</h2>
          <p class="muted" data-i18n="audit.payrollDesc">Summary of payroll entries for the audit period</p>
        </div>
        <button id="btnLoadPayroll" class="btn btn-secondary" type="button" data-i18n="audit.loadPayroll">Load payroll summary</button>
      </div>
      <div id="payrollStatus" class="small muted"></div>

      <div style="overflow:auto; margin-top: 10px;">
        <table id="payrollTable" aria-label="Payroll summary table">
          <thead>
            <tr>
              <th data-i18n="audit.tableWorker">Worker</th>
              <th data-i18n="audit.tablePaymentType">Payment Type</th>
              <th data-i18n="audit.tableTotalPaid">Total Paid</th>
              <th data-i18n="audit.tablePayments"># Payments</th>
            </tr>
          </thead>
          <tbody></tbody>
          <tfoot>
            <tr>
              <td colspan="2"><b data-i18n="audit.tableGrandTotal">Grand Total</b></td>
              <td id="grandTotal"><b>$0.00</b></td>
              <td id="grandCount"><b>0</b></td>
            </tr>
          </tfoot>
        </table>
      </div>
      </div>

      <!-- Document Uploads -->
      <div class="card" style="margin-top: 20px;">
      <h2 style="margin-top:0;" data-i18n="audit.uploadTitle">4) Upload supporting documents</h2>
      <p class="muted" data-i18n="audit.uploadDesc">Upload documents like Schedule C, bank statements, payroll summaries, or other supporting documents.</p>

      <div class="grid">
        <div class="col-6">
          <label>Bank statements (multiple files allowed)</label>
          <input id="bankStatements" type="file" multiple accept=".pdf,.png,.jpg,.jpeg" />
          <div class="small muted">Tip: You can upload one file per month.</div>
        </div>

        <div class="col-6">
          <label>Schedule C</label>
          <input id="scheduleC" type="file" accept=".pdf,.png,.jpg,.jpeg" />
        </div>

        <div class="col-6">
          <label>1096 (if applicable)</label>
          <input id="form1096" type="file" accept=".pdf,.png,.jpg,.jpeg" />
        </div>

        <div class="col-6">
          <label>1099s (multiple files allowed, if applicable)</label>
          <input id="form1099" type="file" multiple accept=".pdf,.png,.jpg,.jpeg" />
        </div>

        <div class="col-12">
          <div class="btn-row">
            <button id="btnUploadDocs" class="btn btn-secondary" type="button" data-i18n="audit.uploadBtn">Upload Document</button>
            <span id="uploadMsg" class="small muted"></span>
          </div>
        </div>
      </div>

      <div style="margin-top:12px;">
        <h3 style="margin: 10px 0 6px;" data-i18n="audit.uploadedTitle">Uploaded Documents</h3>
        <div id="uploadedList" class="small"></div>
      </div>
      </div>

      <!-- Final: Download + Email -->
      <div class="card" style="margin-top: 20px;">
      <h2 style="margin-top:0;" data-i18n="audit.downloadTitle">5) Download a Copy or Email Packet</h2>
      <p class="muted" data-i18n="audit.generateDesc">
        This generates a printer-friendly PDF and sends it (plus uploaded documents) via SendGrid.
      </p>

      <div class="btn-row">
        <button id="btnGeneratePdf" class="btn btn-secondary" type="button" data-i18n="audit.downloadPacket">Download Packet</button>
        <button id="btnEmailPackage" class="btn btn-primary" type="button" data-i18n="audit.emailPackage">Email audit package</button>
      </div>

      <div id="finalMsg" class="small muted" style="margin-top:10px;"></div>
      <div id="finalErr" class="small danger" style="margin-top:10px;"></div>
      </div>
    </div>

  </div>
</main></div>

<script src="../scripts.js" type="module"></script>
<script type="module" src="./audit.js"></script>
</body>
</html>
