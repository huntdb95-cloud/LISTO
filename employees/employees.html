<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Listo ‚Äî Employee Management</title>
<meta content="Manage your employees and subcontractors, upload W9s, COIs, and Workers Compensation documents." name="description"/>
<link href="../styles.css" rel="stylesheet"/>
</head>
<body data-page="employees" data-requires-auth="true">
<a class="skip-link" href="#main">Skip to content</a>
<header class="site-header">
<div class="container header-inner">
<div class="header-left">
<a href="../account/account.html" class="header-avatar" id="headerAvatar" title="My Account" aria-label="My Account" hidden>
<img id="headerAvatarImage" alt="Profile" style="display: none;" />
<span id="headerAvatarInitials" class="header-avatar-initials"></span>
</a>
</div>
<a aria-label="Listo Home" class="brand" href="../dashboard.html">
<img alt="Listo" class="brand-logo" src="../images/logo2.png"/>
</a>

<div class="header-actions">
</div>
</div>
</header>
<div class="app-layout">
  <div id="sidebar"></div>
  <main id="main">

<section class="section">
<div class="container">
<div class="section-head">
<div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 16px; flex-wrap: wrap; margin-bottom: 8px;">
  <div style="flex: 1; min-width: 0;">
    <h1 class="page-title" data-i18n="employees.title">Employee Management</h1>
    <p class="muted" data-i18n="employees.subtitle">
      Add and manage your employees and subcontractors. Upload W9s, COIs, and Workers Compensation documents.
    </p>
  </div>
  <a href="../bookkeeping/bookkeeping.html" class="btn ghost" style="text-decoration: none; flex-shrink: 0; white-space: nowrap;">Back to Bookkeeping</a>
</div>
</div>

<!-- Add/Edit Employee Form -->
<div class="card pad mb" id="employeeFormCard" style="display: none;">
<h2 class="h2" id="formTitle" data-i18n="employees.addEmployee">Add Employee</h2>
<div class="divider"></div>

<!-- Laborer Details (Read-Only, shown when editing a laborer) -->
<div id="laborerDetailsSection" style="display: none; margin-bottom: 24px; padding: 16px; background: var(--bg); border-radius: var(--radius); border: 1px solid var(--border);">
  <h3 class="h3" style="margin: 0 0 16px 0; font-size: 1rem;">Laborer Details</h3>
  <div class="form-grid">
    <div class="form-group">
      <label class="label">Type</label>
      <div class="input" style="background: rgba(0,0,0,.02); border-color: rgba(0,0,0,.08);" id="detailLaborerType">‚Äî</div>
    </div>
    <div class="form-group">
      <label class="label">TIN Last 4</label>
      <div class="input" style="background: rgba(0,0,0,.02); border-color: rgba(0,0,0,.08);" id="detailLaborerTinLast4">‚Äî</div>
    </div>
  </div>
  <div class="form-grid">
    <div class="form-group">
      <label class="label">Phone</label>
      <div class="input" style="background: rgba(0,0,0,.02); border-color: rgba(0,0,0,.08);" id="detailLaborerPhone">‚Äî</div>
    </div>
    <div class="form-group">
      <label class="label">Email</label>
      <div class="input" style="background: rgba(0,0,0,.02); border-color: rgba(0,0,0,.08);" id="detailLaborerEmail">‚Äî</div>
    </div>
  </div>
  <div class="form-group">
    <label class="label">Address</label>
    <div class="input" style="background: rgba(0,0,0,.02); border-color: rgba(0,0,0,.08); min-height: 60px; padding: 10px 12px;" id="detailLaborerAddress">‚Äî</div>
  </div>
  <div class="form-group">
    <label class="label">Notes</label>
    <div class="input" style="background: rgba(0,0,0,.02); border-color: rgba(0,0,0,.08); min-height: 60px; padding: 10px 12px;" id="detailLaborerNotes">‚Äî</div>
  </div>
</div>

<form id="employeeForm">
<input type="hidden" id="employeeId" />

<div class="form-grid">
<div class="form-group">
<label for="empName" data-i18n="employees.name">Full Name *</label>
<input type="text" id="empName" required placeholder="John Doe" />
</div>

<div class="form-group">
<label for="empEmail" data-i18n="employees.email">Email</label>
<input type="email" id="empEmail" placeholder="john@example.com" />
</div>

<div class="form-group">
<label for="empPhone" data-i18n="employees.phone">Phone</label>
<input type="tel" id="empPhone" placeholder="(555) 555-5555" />
</div>

<div class="form-group">
<label for="empType" data-i18n="employees.type">Type *</label>
<select id="empType" required>
<option value="">Select type</option>
<option value="employee" data-i18n="employees.typeEmployee">Employee</option>
<option value="subcontractor" data-i18n="employees.typeSubcontractor">Subcontractor</option>
</select>
</div>
</div>

<!-- Subcontractor-specific fields -->
<div id="subcontractorFields" style="display: none;">
<div class="divider"></div>
<h3 class="h3" data-i18n="employees.subcontractorDocs">Subcontractor Documents</h3>
<p class="muted small" data-i18n="employees.subcontractorDocsDesc">Upload either a Certificate of Insurance (COI) or a Workers Compensation Exemption.</p>

<div class="form-grid">
<div class="form-group">
<label for="empCoi" data-i18n="employees.coi">Certificate of Insurance (COI)</label>
<input type="file" id="empCoi" accept=".pdf,.png,.jpg,.jpeg" />
<div class="small muted" data-i18n="employees.coiHint">PDF, PNG, or JPG (max 10MB)</div>
<div id="coiStatus" class="small muted" style="margin-top: 6px;"></div>
</div>

<div class="form-group">
<label for="empWorkersComp" data-i18n="employees.workersComp">Workers Compensation Exemption</label>
<input type="file" id="empWorkersComp" accept=".pdf,.png,.jpg,.jpeg" />
<div class="small muted" data-i18n="employees.workersCompHint">PDF, PNG, or JPG (max 10MB)</div>
<div id="workersCompStatus" class="small muted" style="margin-top: 6px;"></div>
</div>
</div>
</div>

<div class="divider"></div>

<!-- W9 Upload (for all types) -->
<div class="form-group">
<label for="empW9" data-i18n="employees.w9">W-9 Form</label>
<input type="file" id="empW9" accept=".pdf,.png,.jpg,.jpeg" />
<div class="small muted" data-i18n="employees.w9Hint">PDF, PNG, or JPG (max 10MB)</div>
<div id="w9Status" class="small muted" style="margin-top: 6px;"></div>
</div>

<!-- W9 Information (Optional but recommended for 1099 generation) -->
<div id="w9InfoSection" style="margin-top: 20px; padding: 16px; background: var(--bg); border-radius: var(--radius); border: 1px solid var(--border);">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
<h3 class="h3" style="margin: 0; font-size: 1rem;">W-9 Information (Optional)</h3>
<button type="button" class="btn small ghost" id="toggleW9InfoBtn" style="font-size: 0.85rem;">Show</button>
</div>
<p class="muted small" style="margin-bottom: 12px;">Enter W-9 information to enable 1099-NEC generation. This information is stored securely and used only for tax form generation.</p>
<div id="w9InfoFields" style="display: none;">
  <div id="w9OcrStatusMessage" class="small" style="display: none; margin-bottom: 12px; padding: 8px; border-radius: 4px;"></div>
<div class="form-grid">
<div class="form-group">
<label for="w9LegalName" class="label">Legal Name (Line 1) *</label>
<input type="text" id="w9LegalName" class="input" placeholder="John Doe" />
</div>
<div class="form-group">
<label for="w9BusinessName" class="label">Business Name (Line 2, if different)</label>
<input type="text" id="w9BusinessName" class="input" placeholder="ABC Company LLC" />
</div>
</div>
<div class="form-group">
<label for="w9AddressLine1" class="label">Street Address *</label>
<input type="text" id="w9AddressLine1" class="input" placeholder="123 Main St" />
</div>
<div class="form-group">
<label for="w9AddressLine2" class="label">Address Line 2 (Apt, Suite, etc.)</label>
<input type="text" id="w9AddressLine2" class="input" placeholder="Suite 100" />
</div>
<div class="form-grid">
<div class="form-group">
<label for="w9City" class="label">City *</label>
<input type="text" id="w9City" class="input" placeholder="City" />
</div>
<div class="form-group">
<label for="w9State" class="label">State *</label>
<input type="text" id="w9State" class="input" placeholder="CA" maxlength="2" style="text-transform: uppercase;" />
</div>
<div class="form-group">
<label for="w9Zip" class="label">ZIP Code *</label>
<input type="text" id="w9Zip" class="input" placeholder="12345" maxlength="10" />
</div>
</div>
<div class="form-grid">
<div class="form-group">
<label for="w9TinType" class="label">TIN Type *</label>
<select id="w9TinType" class="input">
<option value="SSN">SSN</option>
<option value="EIN">EIN</option>
</select>
</div>
<div class="form-group">
<label for="w9TinLast4" class="label">TIN Last 4 Digits *</label>
<input type="text" id="w9TinLast4" class="input" placeholder="1234" maxlength="4" pattern="[0-9]{4}" />
<div class="small muted" style="margin-top: 4px;">For security, only the last 4 digits are stored.</div>
</div>
</div>
</div>
</div>

<div class="btn-row" style="margin-top: 20px;">
<button type="submit" class="btn primary" id="saveEmployeeBtn" data-i18n="employees.save">Save Employee</button>
<button type="button" class="btn ghost" id="cancelBtn" data-i18n="employees.cancel">Cancel</button>
</div>

<div id="formMsg" class="form-msg" style="margin-top: 10px;"></div>
<div id="formError" class="form-error" style="margin-top: 10px;"></div>
</form>
</div>

<!-- Employee List -->
<div class="card pad">
<div class="row-between">
<h2 class="h2" data-i18n="employees.listTitle">Employees & Subcontractors</h2>
<button type="button" class="btn primary" id="addEmployeeBtn" data-i18n="employees.addEmployee">Add Employee</button>
</div>
<div class="divider"></div>

<div id="employeesList" class="employees-list">
<div class="muted" data-i18n="employees.loading">Loading...</div>
</div>
</div>
</div>
</section>

<footer class="site-footer">
<div class="container footer-inner">
<div>
<div class="brand footer-brand">
<img alt="Listo" class="brand-logo footer-logo" src="../images/logo.png"/>
</div>
<p class="muted" data-i18n="footer.note">
            Built to help subcontractors look sharp, stay compliant, and win more work.
          </p>
</div>
<div class="footer-links">
<a data-i18n="nav.prequal" href="../prequal.html">Pre-Qualification</a>
<a data-i18n="nav.payroll" href="../payroll/payroll.html">Payroll</a>
<a data-i18n="nav.audit" href="../audit/audit.html">Audit Help</a>
<a data-i18n="nav.support" href="../support.html">Support</a>
</div>
</div>
<div class="container footer-bottom">
<span class="muted">¬© <span id="year"></span> Listo</span>
</div>
</footer>
  </main>
</div>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav" aria-label="Mobile navigation">
  <div class="mobile-bottom-nav-items">
    <a href="../dashboard.html" class="mobile-bottom-nav-item" data-nav="home">
      <div class="mobile-bottom-nav-icon">üè†</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.dashboard">Home</div>
    </a>
    <a href="../contracts/contracts.html" class="mobile-bottom-nav-item" data-nav="contracts">
      <div class="mobile-bottom-nav-icon">üìÑ</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.contracts">Contracts</div>
    </a>
    <a href="../bookkeeping/bookkeeping.html" class="mobile-bottom-nav-item active" data-nav="bookkeeping">
      <div class="mobile-bottom-nav-icon">üìä</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.bookkeeping">Bookkeeping</div>
    </a>
    <a href="../tools/tools.html" class="mobile-bottom-nav-item" data-nav="tools">
      <div class="mobile-bottom-nav-icon">üîß</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.tools">Tools</div>
    </a>
    <a href="../settings/settings.html" class="mobile-bottom-nav-item" data-nav="settings">
      <div class="mobile-bottom-nav-icon">‚öôÔ∏è</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.settings">Settings</div>
    </a>
  </div>
</nav>

<script src="../sidebar.js"></script>
<script src="../scripts.js" type="module"></script>
<script type="module" src="./employees.js"></script>
</body>
</html>

