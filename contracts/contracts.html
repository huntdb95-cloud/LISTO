<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Listo ‚Äî Contracts</title>
<meta content="Manage your pre-qualification documents and active builder contracts with jobs." name="description"/>
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet"/>
<link href="../styles.css" rel="stylesheet"/>
<style>
  .contract-card {
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 16px;
    margin-bottom: 16px;
  }
  .contract-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
  }
  .contract-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
  }
  .contract-actions {
    display: flex;
    gap: 8px;
  }
  .jobs-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
  }
  .job-card {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 12px;
    margin-bottom: 12px;
  }
  .job-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
  }
  .job-title {
    font-weight: 600;
    margin: 0;
  }
  .job-actions {
    display: flex;
    gap: 8px;
  }
  .document-links {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 8px;
  }
  .document-link {
    font-size: 0.9rem;
  }
  
  /* Job Status Badge */
  .job-status-badge {
    display: inline-block;
    transition: all 0.2s;
  }
  
  .job-status-badge.paid {
    background: rgba(16, 185, 129, 0.15);
    color: #059669;
  }
  
  .job-status-badge.unpaid {
    background: rgba(245, 158, 11, 0.15);
    color: #d97706;
  }
  
  .job-status-badge:hover {
    opacity: 0.8;
    transform: scale(1.05);
  }
  
  /* Modal Styles */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.2s ease-out;
  }
  
  .modal-content {
    background: var(--panel);
    border-radius: var(--radius-lg);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    animation: slideUp 0.3s ease-out;
  }
  
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
  }
  
  .modal-header .h2 {
    margin: 0;
  }
  
  .modal-close {
    background: none;
    border: none;
    font-size: 28px;
    color: var(--muted);
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
  }
  
  .modal-close:hover {
    background: var(--bg);
    color: var(--text);
  }
  
  .modal-body {
    padding: 24px;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  @keyframes slideUp {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
</style>
</head>
<body data-page="contracts" data-requires-auth="true">
<a class="skip-link" href="#main">Skip to content</a>
<header class="site-header">
<div class="container header-inner">
<div class="header-left">
<button aria-controls="sideNav" aria-expanded="false" class="sidebar-toggle" type="button"><span class="sr-only">Open navigation</span><span aria-hidden="true" class="hamburger"></span></button>
<a href="../account/account.html" class="header-avatar" id="headerAvatar" title="My Account" aria-label="My Account" hidden>
<img id="headerAvatarImage" alt="Profile" style="display: none;" />
<span id="headerAvatarInitials" class="header-avatar-initials"></span>
</a>
</div>
<a aria-label="Listo Home" class="brand" href="../dashboard.html">
<img alt="Listo" class="brand-logo" src="../images/logo2.png"/>
</a>

<div class="header-actions">
</div>
</div>
</header><div class="layout"><aside aria-label="Primary" class="sidebar"><div class="menu_content">
<ul class="menu_items">
<div class="menu_title menu_main"></div>
<li class="item">
<a href="../dashboard.html" class="nav_link" data-i18n="nav.dashboard">
<span class="navlink_icon">
<i class="bx bx-home-alt"></i>
</span>
<span class="navlink">Home</span>
</a>
</li>
<li class="item">
<a href="../contracts/contracts.html" class="nav_link" data-i18n="nav.contracts">
<span class="navlink_icon">
<i class="bx bx-file-blank"></i>
</span>
<span class="navlink">Contracts</span>
</a>
</li>
<li class="item">
<a href="../bookkeeping/bookkeeping.html" class="nav_link" data-i18n="nav.bookkeeping">
<span class="navlink_icon">
<i class="bx bx-book"></i>
</span>
<span class="navlink">Bookkeeping</span>
</a>
</li>
<li class="item">
<a href="../audit/audit.html" class="nav_link" data-i18n="nav.audit">
<span class="navlink_icon">
<i class="bx bx-clipboard"></i>
</span>
<span class="navlink">Audit Help</span>
</a>
</li>
<li class="item">
<a href="../contract-scanner/contract-scanner.html" class="nav_link" data-i18n="nav.contractScanner">
<span class="navlink_icon">
<i class="bx bx-scan"></i>
</span>
<span class="navlink">Contract Scanner</span>
</a>
</li>
<li class="item">
<a href="../invoice/invoice.html" class="nav_link" data-i18n="nav.invoiceBuilder">
<span class="navlink_icon">
<i class="bx bx-receipt"></i>
</span>
<span class="navlink">Invoice Builder</span>
</a>
</li>
</ul>
<ul class="menu_items">
<div class="menu_title menu_support"></div>
<li class="item">
<a href="../support.html" class="nav_link" data-i18n="nav.support">
<span class="navlink_icon">
<i class="bx bx-help-circle"></i>
</span>
<span class="navlink">Support</span>
</a>
</li>
<li class="item">
<a href="../account/account.html" class="nav_link" data-i18n="nav.account">
<span class="navlink_icon">
<i class="bx bx-user"></i>
</span>
<span class="navlink">My Account</span>
</a>
</li>
</ul>
<div class="sidebar-bottom">
<button class="sidebar-logout-btn" data-i18n="auth.logout" id="sidebarLogoutBtn" type="button" hidden>
<span class="navlink_icon">
<i class="bx bx-log-out"></i>
</span>
<span class="navlink">Log out</span>
</button>
</div>
</div></aside><main id="main">
<section class="section">
<div class="container">
<div class="section-head">
<h1 class="page-title" data-i18n="contracts.title">Contracts</h1>
<p class="muted" data-i18n="contracts.subtitle">
            Manage your active builder contracts and track jobs.
          </p>
</div>
<!-- Contract Modal -->
<div id="contractModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="h2" id="contractModalTitle" data-i18n="contracts.addContract">Add Builder Contract</h2>
      <button type="button" class="modal-close" onclick="hideContractModal()" aria-label="Close">&times;</button>
    </div>
    <div class="modal-body">
      <form id="contractForm">
        <input type="hidden" id="contractId" />
        
        <div class="form-group">
          <label for="builderName" data-i18n="contracts.builderName">Builder Name *</label>
          <input type="text" id="builderName" required placeholder="ABC Construction" />
        </div>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="builderCoi" data-i18n="contracts.builderCoi">Builder-Specific COI</label>
            <input type="file" id="builderCoi" accept=".pdf,.png,.jpg,.jpeg" />
            <div class="small muted" data-i18n="contracts.fileHint">PDF, PNG, or JPG (max 10MB)</div>
            <div id="builderCoiStatus" class="small muted" style="margin-top: 6px;"></div>
          </div>
          
          <div class="form-group">
            <label for="subAgreementType" data-i18n="contracts.subAgreementType">Subcontractor Agreement *</label>
            <select id="subAgreementType" required>
              <option value="">Select option</option>
              <option value="sign" data-i18n="contracts.signStandard">Sign Standard Agreement</option>
              <option value="upload" data-i18n="contracts.uploadSigned">Upload Signed Agreement</option>
            </select>
          </div>
          
          <div id="subAgreementSignOption" class="form-group" style="display: none;">
            <div class="small muted" data-i18n="contracts.signStandardDesc">You will be redirected to sign the standard subcontractor agreement.</div>
            <button type="button" class="btn small primary" id="signAgreementBtn" data-i18n="contracts.goToSign">Go to Sign Agreement</button>
          </div>
          
          <div id="subAgreementUploadOption" class="form-group" style="display: none;">
            <label for="subAgreement" data-i18n="contracts.uploadSignedAgreement">Upload Signed Agreement</label>
            <input type="file" id="subAgreement" accept=".pdf,.png,.jpg,.jpeg" />
            <div class="small muted" data-i18n="contracts.fileHint">PDF, PNG, or JPG (max 10MB)</div>
            <div id="subAgreementStatus" class="small muted" style="margin-top: 6px;"></div>
          </div>
        </div>
        
        <div id="contractFormMsg" class="form-msg" style="margin-top: 10px;"></div>
        <div id="contractFormError" class="form-error" style="margin-top: 10px;"></div>
        
        <div class="btn-row" style="margin-top: 20px;">
          <button type="submit" class="btn primary" id="saveContractBtn" data-i18n="contracts.saveContract">Save Contract</button>
          <button type="button" class="btn ghost" onclick="hideContractModal()" data-i18n="contracts.cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Job Modal -->
<div id="jobModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="h2" id="jobModalTitle" data-i18n="contracts.addJob">Add Job</h2>
      <button type="button" class="modal-close" onclick="hideJobModal()" aria-label="Close">&times;</button>
    </div>
    <div class="modal-body">
      <form id="jobForm">
        <input type="hidden" id="jobContractId" />
        <input type="hidden" id="jobId" />
        
        <div class="form-group">
          <label for="jobName" data-i18n="contracts.jobName">Job Name *</label>
          <input type="text" id="jobName" required placeholder="Project Name" />
        </div>
        
        <div class="form-group">
          <label for="jobAddress" data-i18n="contracts.jobAddress">Address</label>
          <input type="text" id="jobAddress" placeholder="123 Main St, City, State ZIP" />
        </div>
        
        <div class="form-group">
          <label for="jobDescription" data-i18n="contracts.jobDescription">Description of Work</label>
          <textarea id="jobDescription" rows="4" placeholder="Describe the work being performed..."></textarea>
        </div>
        
        <div class="form-group">
          <label for="jobProjectCoi" data-i18n="contracts.projectCoi">Project COI</label>
          <input type="file" id="jobProjectCoi" accept=".pdf,.png,.jpg,.jpeg" />
          <div class="small muted" data-i18n="contracts.fileHint">PDF, PNG, or JPG (max 10MB)</div>
          <div id="jobProjectCoiStatus" class="small muted" style="margin-top: 6px;"></div>
        </div>
        
        <div id="jobFormMsg" class="form-msg" style="margin-top: 10px;"></div>
        <div id="jobFormError" class="form-error" style="margin-top: 10px;"></div>
        
        <div class="btn-row" style="margin-top: 20px;">
          <button type="submit" class="btn primary" id="saveJobBtn" data-i18n="contracts.saveJob">Save Job</button>
          <button type="button" class="btn ghost" onclick="hideJobModal()" data-i18n="contracts.cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>


<!-- Active Contracts -->
<div class="card pad mb">
<div class="row-between">
<h2 class="h2" data-i18n="contracts.activeContracts">Active Contracts</h2>
<button type="button" class="btn primary" id="addContractBtn" data-i18n="contracts.addContract">Add Builder Contract</button>
</div>
<div class="divider"></div>

<div id="activeContractsList">
<div class="muted" data-i18n="contracts.loading">Loading...</div>
</div>
</div>

<!-- Inactive Contracts -->
<div class="card pad" style="margin-top: 32px;">
<div class="row-between">
<h2 class="h2" data-i18n="contracts.inactiveContracts">Inactive Contracts</h2>
</div>
<div class="divider"></div>

<div id="inactiveContractsList">
<div class="muted" data-i18n="contracts.noInactiveContracts">No inactive contracts.</div>
</div>
</div>
</section>

<footer class="site-footer">
<div class="container footer-inner">
<div>
<div class="brand footer-brand">
<img alt="Listo" class="brand-logo footer-logo" src="../images/logo.png"/>
</div>
<p class="muted" data-i18n="footer.note">
            Built to help subcontractors look sharp, stay compliant, and win more work.
          </p>
</div>
<div class="footer-links">
<a data-i18n="nav.contracts" href="../contracts/contracts.html">Contracts</a>
<a data-i18n="nav.bookkeeping" href="../bookkeeping/bookkeeping.html">Bookkeeping</a>
<a data-i18n="nav.audit" href="../audit/audit.html">Insurance Audit Help</a>
<a data-i18n="nav.support" href="../support.html">Support</a>
</div>
</div>
<div class="container footer-bottom">
<span class="muted">¬© <span id="year"></span> Listo</span>
</div>
</footer>
</main></div>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav" aria-label="Mobile navigation">
  <div class="mobile-bottom-nav-items">
    <a href="../dashboard.html" class="mobile-bottom-nav-item" data-nav="home">
      <div class="mobile-bottom-nav-icon">üè†</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.dashboard">Home</div>
    </a>
    <a href="../contracts/contracts.html" class="mobile-bottom-nav-item active" data-nav="contracts">
      <div class="mobile-bottom-nav-icon">üìÑ</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.contracts">Contracts</div>
    </a>
    <a href="../bookkeeping/bookkeeping.html" class="mobile-bottom-nav-item" data-nav="bookkeeping">
      <div class="mobile-bottom-nav-icon">üìä</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.bookkeeping">Bookkeeping</div>
    </a>
    <a href="../tools/tools.html" class="mobile-bottom-nav-item" data-nav="tools">
      <div class="mobile-bottom-nav-icon">üîß</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.tools">Tools</div>
    </a>
    <a href="../settings/settings.html" class="mobile-bottom-nav-item" data-nav="settings">
      <div class="mobile-bottom-nav-icon">‚öôÔ∏è</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.settings">Settings</div>
    </a>
  </div>
</nav>

<script src="../scripts.js" type="module"></script>
<script type="module" src="./contracts.js"></script>
</body>
</html>

