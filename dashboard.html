<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/>
<link rel="icon" type="image/png" href="/images/favicon.png"/>
<link rel="shortcut icon" type="image/png" href="/images/favicon.png"/>
<link rel="apple-touch-icon" href="/images/favicon.png"/>
<title>Listo ‚Äî Home</title>
<meta content="Your Listo dashboard - view your account information and access all tools." name="description"/>
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>
</head>
<body data-page="dashboard" data-requires-auth="true">
<a class="skip-link" href="#main">Skip to content</a>
<header class="site-header">
<div class="container header-inner">
<div class="header-left">
<a href="account/account.html" class="header-avatar" id="headerAvatar" title="My Account" aria-label="My Account" hidden>
<img id="headerAvatarImage" alt="Profile" style="display: none;" />
<span id="headerAvatarInitials" class="header-avatar-initials"></span>
</a>
</div>
<a aria-label="Listo Home" class="brand" href="dashboard.html">
<img alt="Listo" class="brand-logo" src="images/logo2.png"/>
</a>

<div class="header-actions">
</div>
</div>
</header>
<div class="app-layout">
  <div id="sidebar"></div>
  <main id="main">

<section class="section">
<div class="container">
<div class="section-head">
<h1 class="page-title" data-i18n="dashboard.title">Dashboard</h1>
<p class="muted" data-i18n="dashboard.subtitle">
            Welcome back! Here's an overview of your account.
          </p>
</div>

<!-- Reminders Banner Bar (Desktop: skinny bar above grid) -->
<div class="card pad reminders-card">
<h2 class="h2">Reminders</h2>
<div class="divider"></div>
<div id="remindersContainer">
<div class="muted">Loading reminders...</div>
</div>
</div>

<!-- Account Info and Facebook Feed -->
<div class="dashboard-top-grid">
<!-- Account Info Card -->
<div class="card pad account-info-card">
<h2 class="h2" data-i18n="dashboard.accountInfo">Owners Dashboard</h2>
<div class="divider"></div>
<div class="account-info-content-wrapper">
<div class="grid-2 account-info-grid">
<div class="account-info-name-section">
<div class="kv-row">
<div class="muted" data-i18n="dashboard.name">Name:</div>
<div class="kv-val" id="dashboardName">‚Äî</div>
</div>
</div>
<div class="account-info-logo-section">
<div class="profile-picture-container">
<div class="profile-avatar" id="dashboardAvatar" style="width: 120px; height: 120px;">
<img id="dashboardAvatarImage" alt="Profile" style="display: none;" />
<span id="dashboardAvatarInitials" class="avatar-initials"></span>
</div>
</div>
</div>
</div>
<div>
<a class="btn primary" href="account/account.html" data-i18n="dashboard.editAccount">Edit Account</a>
</div>
</div>
<div class="divider" style="margin-top: 24px;"></div>
<!-- Completion Status -->
<h3 class="h3" style="margin-top: 0;" data-i18n="prequal.dashboardTitle">Completion Status</h3>
<div class="prequal-dashboard-grid">
<div class="prequal-dashboard-item">
<div class="dashboard-status">
<span aria-hidden="true" class="dot dot-off" id="dashboardW9Dot"></span>
<div style="flex: 1; min-width: 0;">
<span data-i18n="prequal.itemW9">W-9 Completed</span>
</div>
</div>
</div>
<div class="prequal-dashboard-item">
<div class="dashboard-status">
<span aria-hidden="true" class="dot dot-off" id="dashboardCoiDot"></span>
<div style="flex: 1; min-width: 0;">
<span data-i18n="prequal.itemCOIShort">Certificate of Insurance</span>
</div>
</div>
</div>
<div class="prequal-dashboard-item">
<div class="dashboard-status">
<span aria-hidden="true" class="dot dot-off" id="dashboardAgreementDot"></span>
<div style="flex: 1; min-width: 0;">
<span data-i18n="prequal.itemAgreement" class="desktop-only">Subcontractor Agreement</span>
<span class="mobile-only">Sub-agreement</span>
</div>
</div>
</div>
<div class="prequal-dashboard-item desktop-only">
<div class="dashboard-status">
<span aria-hidden="true" class="dot dot-off" id="dashboardBusinessLicenseDot"></span>
<div style="flex: 1; min-width: 0;">
<span data-i18n="prequal.itemBusinessLicense">Business License</span>
<span class="muted small" data-i18n="prequal.optional"> (Optional)</span>
</div>
</div>
</div>
<div class="prequal-dashboard-item desktop-only">
<div class="dashboard-status">
<span aria-hidden="true" class="dot dot-off" id="dashboardWorkersCompDot"></span>
<div style="flex: 1; min-width: 0;">
<span data-i18n="prequal.itemWorkersComp">Workers Compensation Exemption</span>
<span class="muted small" data-i18n="prequal.optional"> (Optional)</span>
</div>
</div>
</div>
</div>
</div>

<!-- News & Updates Card (Elfsight Social Feed) -->
<div class="card pad facebook-feed-card">
<h2 class="h2" data-i18n="dashboard.facebookFeed">News & Updates</h2>
<div class="divider"></div>
<div class="facebook-feed-container" id="newsUpdatesContainer">
  <!-- Loading placeholder -->
  <div id="newsUpdatesLoading" class="news-updates-loading">
    <div style="padding: 40px 20px; text-align: center; color: var(--muted);">
      <div style="font-size: 0.95rem;">Loading updates...</div>
    </div>
  </div>
  <!-- Elfsight Social Feed widget -->
  <div class="elfsight-app-aebac189-c6ff-4d3e-b24e-e5f9fa23632a" data-elfsight-app-lazy></div>
</div>
</div>
</div>

<!-- Quick Links -->
<div class="card pad quick-links-section">
<h2 class="h2" data-i18n="dashboard.quickLinks">Quick Links</h2>
<div class="divider"></div>
<div class="dashboard-grid">
<a class="dashboard-card" href="prequal.html" style="text-decoration: none; color: inherit;">
<h3 class="h3" data-i18n="nav.prequal">Pre-Qualification</h3>
<p class="muted small" data-i18n="dashboard.prequalDesc">Complete your pre-qualification checklist</p>
</a>
<a class="dashboard-card" href="payroll/payroll.html" style="text-decoration: none; color: inherit;">
<h3 class="h3" data-i18n="nav.payroll">Payroll</h3>
<p class="muted small" data-i18n="dashboard.payrollDesc">Track employee payments</p>
</a>
<a class="dashboard-card" href="invoice/invoice.html" style="text-decoration: none; color: inherit;">
<h3 class="h3" data-i18n="nav.invoiceBuilder">Invoice Builder</h3>
<p class="muted small" data-i18n="dashboard.invoiceDesc">Create and send invoices</p>
</a>
<a class="dashboard-card" href="audit/audit.html" style="text-decoration: none; color: inherit;">
<h3 class="h3" data-i18n="nav.audit">Audit Help</h3>
<p class="muted small" data-i18n="dashboard.auditDesc">Prepare for insurance audits</p>
</a>
</div>
</div>
</div>
</section>

  </main>
</div>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav" aria-label="Mobile navigation">
  <div class="mobile-bottom-nav-items">
    <a href="dashboard.html" class="mobile-bottom-nav-item active" data-nav="home">
      <div class="mobile-bottom-nav-icon">üè†</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.dashboard">Home</div>
    </a>
    <a href="contracts/contracts.html" class="mobile-bottom-nav-item" data-nav="contracts">
      <div class="mobile-bottom-nav-icon">üìÑ</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.contracts">Contracts</div>
    </a>
    <a href="bookkeeping/bookkeeping.html" class="mobile-bottom-nav-item" data-nav="bookkeeping">
      <div class="mobile-bottom-nav-icon">üìä</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.bookkeeping">Bookkeeping</div>
    </a>
    <a href="tools/tools.html" class="mobile-bottom-nav-item" data-nav="tools">
      <div class="mobile-bottom-nav-icon">üîß</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.tools">Tools</div>
    </a>
    <a href="settings/settings.html" class="mobile-bottom-nav-item" data-nav="settings">
      <div class="mobile-bottom-nav-icon">‚öôÔ∏è</div>
      <div class="mobile-bottom-nav-label" data-i18n="nav.settings">Settings</div>
    </a>
  </div>
</nav>

<!-- Force HTTPS redirect -->
<script>
  if (location.protocol !== 'https:' && location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
    location.replace('https:' + window.location.href.substring(window.location.protocol.length));
  }
</script>
<!-- Elfsight Social Feed platform script -->
<script src="https://elfsightcdn.com/platform.js" async></script>

<script src="sidebar.js"></script>
<script src="scripts.js" type="module"></script>
<script type="module" src="dashboard.js"></script>
<!-- Elfsight loading placeholder handler -->
<script>
  // Hide loading placeholder once Elfsight content is present
  (function() {
    const loadingEl = document.getElementById('newsUpdatesLoading');
    const widgetEl = document.querySelector('.elfsight-app-aebac189-c6ff-4d3e-b24e-e5f9fa23632a');
    
    if (!loadingEl || !widgetEl) return;
    
    let checkCount = 0;
    const maxChecks = 20; // 10 seconds max (500ms * 20)
    
    function checkElfsightLoaded() {
      checkCount++;
      
      // Check if Elfsight has injected actual content (not just empty divs)
      // Note: widgetEl has min-height: 600px, so offsetHeight check is unreliable
      const hasIframe = widgetEl.querySelector('iframe');
      const hasElfsightContent = widgetEl.querySelector('[class*="elfsight"]:not(.elfsight-app-aebac189-c6ff-4d3e-b24e-e5f9fa23632a)');
      // Check for meaningful children (not just the widget container itself)
      const hasRealChildren = Array.from(widgetEl.children).some(child => {
        // Ignore empty divs or the widget container itself
        return child.tagName !== 'DIV' || 
               child.offsetHeight > 50 || 
               child.querySelector('iframe') ||
               child.textContent.trim().length > 0;
      });
      
      const hasContent = hasIframe || hasElfsightContent || hasRealChildren;
      
      if (hasContent) {
        loadingEl.style.display = 'none';
      } else if (checkCount < maxChecks) {
        setTimeout(checkElfsightLoaded, 500);
      } else {
        // Timeout - hide loading anyway after max checks
        loadingEl.style.display = 'none';
      }
    }
    
    // Start checking after DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(checkElfsightLoaded, 1000); // Wait 1s for Elfsight to start loading
      });
    } else {
      setTimeout(checkElfsightLoaded, 1000);
    }
  })();
</script>
</body>
</html>

